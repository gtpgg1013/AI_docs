# 2019/04/25

# MS Azure lec #3

- ## 5장 : Introduction to Azure Networking

  - 선수강과목 : CCNA

  - 선수지식 : Network 기초

    - ##### IP Address : 인터넷의 주소 체계 : v4 ($32bit=2^{32}=42억9천개$)  요게 부족해서 / v6 (128bit)로 업그레이드 중 : 340 언데실리온($10^{36}$)

      - 0 : 네트워크 식별

      - 127 : loop back IP, 자신의 시스템에 구현된 IP, test

      - A Class : 0으로 시작 : 00000000 00000000 00000000 00000000 (1.0.0.0) ~ 

        01111111 1111111 1111111 1111111 (126.255.255.255) // 범위 : 0, 127은 특수용도

        32비트를 8개씩 나눔(옥텟) ==> 4옥텟 : 1옥텟 = 8bit

        N.H.H.H (N=network / H=host) / SM = 255.0.0.0

        $Network 수 = 2^7-2 = 126   (0, 127 빼고)$

        $Host 수 = 2^{24}-2 = 16,777,214  (Host ID의 모든 비트가 0 or 모든 비트가 1일때는 IP 세팅 X)$

        - 세팅하지 않는 IP
          - Host ID의 모든 비트가 0일때 : Network를 식별
          - Host ID의 모든 비트가 1일때 : BroadCast 데이터 전송시 사용

      - B Class : 10으로 시작 : 10000000 00000000 00000000 00000000 (128.0.0.0) ~ 

        10111111 1111111 1111111 1111111 (191.255.255.255)

        N.N.H.H / 255.255.0.0

        $Network 수 = 2^{14} = 16384$

        $Host 수 = 2^{16} - 2 = 65534$ 

      - C Class : 110으로 시작 : 11000000 00000000 00000000 00000000 (192.0.0.0) ~ 

        11011111 1111111 1111111 1111111 (223.255.255.255)

        N.N.N.H / 255.255.255.0

        $Network 수 = 2^{21} = 2097152$

        $Host 수 = 2^8-2 = 254 $

      - 여기까지 주소용으로 사용하는 IP

      =============================================================================

      - D Class 1110 : 멀티캐스트 데이터 전송 (1: 그룹 통신)
      - E Class 1110 : 군사용 / 예약 IP
      - ![1556165519309](1556165519309.png)
        - 근데 왜 이 컴퓨터는 A class 인데 subnet mask가 255.255.255.0 이니?
          - A class 하나당 1400만개 호스팅 할 수 있다 : 기업 하나한테 주면 낭비가 너무 심함 --> 다른 방식 사용 : CIDR
      - IP Address = 
        - Network ID : 네트워크를 식별 (우편번호) : 라우터 이걸로 찾고
          - ISP(인터넷 서비스 업체 : KT / SKT 등등)에서 부여
            - ISP가 IANA에서 IP 대역폭을 구입
        - Host ID : 네트워크내의 시스템을 식별 (번지) : 실제 컴퓨터(시스템)
          - 네트워크 관리자가 부여

    - ##### Subnet Mask : Network ID(네트워크)를 식별하기 위해 첫번쨰 비트부터 1이 들어가는 비트까지 Network ID

    - ##### Gateway IP : 라우터 장비에 부여되는 IP, 내부 네트워크와 외부 네트워크의 관문

      - IP와 Subnet Mask를 AND연산하여 Network ID를 식별하고 목적지 IP와 자신의 Subnet Mask를 AND 연산하여 목적지 Network ID를 식별 => AND(bit연산)
      - 두 Network ID가 동일할 경우 Gateway없이 통신하고, 다를 경우 패킷을 Gateway에 전송

    - ##### CIDR 표기법

      - (10.0.0.0/24) < == CIDR 표기법

      - CIDR : Subnet Mask를 10진법으로 표기하지 않고 2진법으로 표기 / Class는 IP낭비가 심함. 10진법 표기

        - 우리회사는 50개의 IP가 필요합니다 : 6bit만 있으면 = 64 : 충분하다!

        - 그래서 맨 뒤에서부터 6개만 Host ID로 보고, 나머지 26개는 Network ID로 봄

        - ip/26 <= subnet mask 1 비트수 (CIDR)

        - ip/255.255.255.192

        - 11111111 11111111 11111111 11000000 ==> 62개 ip 사용가능

          - 연습문제 : 300개 ip 필요, 최적의 subnet mask CIDR 표기법?

            - ip/23
            - ip/255.255.254.0

            - 연습문제 2 : ip 2000개? ==> ip/21, ip/255.255.248.0

    - ##### Sub Network 

      - 기존 네트웍 잘라서 쓰기 : Subnetting

      - 클래스로 자르면 너무 비효율적이기 때문에 Host 영역을 더 늘려서 사용해보겠다!

        

      - ISP에서 70.12.113.0/24 를 부여받았다. 2개의 네트워크를 분할해서 사용 (라우터 사용)

        - 70.12.113.00000000 ==> 70.12.113.0/25 <== 요 25가 subnet mask!

          - Network ID : 70.12.113.0 (host에 전부 0)
          - Broadcast IP : 70.12.113.127 (host에 전부 1)
          - Host 수 : $2^7 -2 =126$
          - IP 범위 : 70.12.113.1 ~ 70.12.113.126

        - 70.12.113.10000000 ==> 70.12.113.128/25

          - Network ID : 70.12.113.128

          - Broadcast IP : 70.12.113.255

          - Host 수 :  $2^7 -2 =126$

          - IP 범위 : 70.12.113.129 ~ 70.12.113.254

            

      - ISP에서 70.12.0.0/16 을 부여받았다. 4개의 네트워크를 분할해서 사용 (라우터 사용)

        - 70.12.00000000.00000000 ==> 70.12.0.0/18

          - Network ID : 70.12.00000000.00000000 => 70.12.0.0
          - Broadcast IP : 70.12.00111111.11111111 => 70.12.63.255
          - Host 수 : $2^{14} -2 =16382$
          - IP 범위 : 70.12.0.1 ~ 70.12.63.254

        - 70.12.01000000.00000000 ==> 70.12.64.0/18

          - Network ID : 70.12.64.0 
          - Broadcast IP : 70.12.01111111.11111111 => 70.12.127.255
          - Host 수 : $2^{14} -2 =16382$
          - IP 범위 : 70.12.64.1 ~ 70.12.127.254

        - 70.12.10000000.00000000 ==> 70.12.128.0/18

          - Network ID : 70.12.128.0 
          - Broadcast IP : 70.12.10111111.11111111 => 70.12.191.255
          - Host 수 : $2^{14} -2 =16382$
          - IP 범위 : 70.12.128.1 ~ 70.12.191.254

        - 70.12.11000000.00000000 ==> 70.12.192.0/18

          - Network ID : 70.12.192.0

          - Broadcast IP : 70.12.11111111.11111111 => 70.12.255.255

          - Host 수 : $2^{14} -2 =16382$

          - IP 범위 : 70.12.192.1 ~ 70.12.255.254

            

    - ##### OSI 7 Layer

    - ##### Network 장비 (라우터, 스위치, 허브)

    - ##### NAT

    - ##### VPN

    - ##### DNS

      

- ### 추가 지식

  - ipconfig /flushdns
  - C:\Windows\System32\drivers\etc ==> hosts라는 파일이 메모리로 load되게 됨
  - 데이터 전송 방식
    - 유니캐스트(1:1)
    - 멀티캐스트(1:그룹) : 하나의 시스템에서 데이터를 여러명에게 전송
    - 브로드캐스트(1:모든(라우터에서 필터)) : 네트워크 안에 있는 모든 컴퓨터에게 데이터 전송
      - 목적지주소에 브로드캐스트 IP가 들어감
  - 라우터 : 네트웍을 분리시켜주는 장비
  - IANA : Internet Assigned Numbers Authority
  - ISP : Internet Service Provider

