# 3. Metrics Optimization & Advanced Feature Engineering

- evaluation metrics

  - 측정 단위!
  - 어떤 metric => 어떤 competition!
  - 회귀 / 분류
  - 기준선! : 어떤 기준(feature)이 가장 중요한지 설정하고 그것을 최적화한다!
  - 어떻게 metrics가 작동하고, 어떻게 최적화 할지 결정하라!
  - 최적의 hyperplane 찾기 어려운 경우도 많음
    - 다양한 추론 방법 사용해야함
    - train & test value : metric이 다르게 작용할 수도 있다
  - 시계열은 더 어려울 수도 있음
    - train data가 pattern을 다 포함하지 못할 경우
    - 특별한 metric을 사용하여 학습해야할 수 있음
    - metric 최적화 위해 좋은 방법 찾기 => 경쟁력!
      - 이 사람은 loss를 그냥 차이의 절댓값으로 했더니 잘 안됐다고 함
  - why so many metrics & metrics의 설정은 왜 중요한가?
    - 다양한 문제에 따라 다양한 metrics를 써야하니까!
    - 그걸로 rank!

- Metrics

  - 어떤 놈이 어떤 상황에 더 좋은지 아는 것은 중요!

  - Regression

    - MSE : 일반적, 걍 기본적 사용 : 평균 제곱 거리
      - best constant : target average
      - 데이터 세트의 평균 오류를 가장 적게하는 metric
    - RMSE : root MSE : scaling : 선형적으로 분석 가능
      - MSE와 동일한 방식으로 작동 : 모델 점수 부여의 측면
      - gradient 모델은 조금 다름 : RMSE를 보고 바로 모델개선한다? lr고친다?
    - R-squared
      - 0이면 잘 못함 / 1이면 잘 함 <= MSE의 개략적인 평가 기준
    - MAE : Mean Absolute Error
      -  모델의 예측값과 실제값의 차이를 모두 더한다는 개념
      - best constant : target median
      - 강건한 모델 생성 가능 : robust => 이상치의 영향을 덜 받음
      - gradient  : 미분불가능하기 때문에 못 씀 / 얼마나 자주 정확히 예측했는지 빈도로 파악 가능
      - 2번 미분하면 싹다 0
    - MSE vs MAE
      - 아웃라이어 있니? => MAE : 아웃라이어라고 확신할 때...?
      - 물체가 rare하지만, care about 하여 사용할 만하다! => MSE
    - 위의 metrics는 표본의 크기에 따라 값이 좌우될 수 있다! => ratio 고려
    - sensitive to relative errors한 친구들
    - MSPE
      - MSE의 weighted version
      - best constant : weighted target mean

    - MAPE
      - MAE의 weighted version
      - best constant : weighted target median
    - RMSLE
      - log RMSE
      - 그래프의 비대칭성 : 
      - best constant in log space : mean target value 
      - 그다음 exp로 다시 원래 사이즈로 돌려줘야 함!
      - 작은 target들에게 덜 편향되어있지만, 상대적으로 오류가 있어도 작동

  - Classification

    - 

- mean encodings